include:
    - project: 'atlas-l1calo-efex/Hog'
      file: '/gitlab-ci.yml'

before_script:
    - source ${PROFPGA_PATH}/settings64.sh


#################### CSF Project ###########################

create_project:csf:
    extends: .create_project
    variables:
      extends: .vars
      PROJECT_NAME: csf

synthesise_ips:csf:
    extends: .synthesise_ips
    variables:
      extends: .vars
      PROJECT_NAME: csf
      IP_PATH: IP
    dependencies:
        - create_project:csf

synthesise_project:csf:
    extends: .synthesise_project
    variables:
      extends: .vars
      PROJECT_NAME: csf
    dependencies:
        - synthesise_ips:csf
        - create_project:csf

implement_project:csf:
    extends: .implement_project
    variables:
      extends: .vars
      PROJECT_NAME: csf
    dependencies:
       - create_project:csf
       - synthesise_ips:csf
       - synthesise_project:csf

write_bitstream:csf:
    extends: .write_bitstream
    variables:
      extends: .vars
      PROJECT_NAME: csf
    dependencies:
       - create_project:csf
       - synthesise_ips:csf
       - synthesise_project:csf
       - implement_project:csf

#################### pT Project ###########################

create_project:pt:
    extends: .create_project
    variables:
      extends: .vars
      PROJECT_NAME: pt

synthesise_ips:pt:
    extends: .synthesise_ips
    variables:
      extends: .vars
      PROJECT_NAME: pt
      IP_PATH: IP
    dependencies:
        - create_project:pt

synthesise_project:pt:
    extends: .synthesise_project
    variables:
      extends: .vars
      PROJECT_NAME: pt
    dependencies:
        - synthesise_ips:pt
        - create_project:pt

implement_project:pt:
    extends: .implement_project
    variables:
      extends: .vars
      PROJECT_NAME: pt
    dependencies:
       - create_project:pt
       - synthesise_ips:pt
       - synthesise_project:pt

write_bitstream:pt:
    extends: .write_bitstream
    variables:
      extends: .vars
      PROJECT_NAME: pt
    dependencies:
       - create_project:pt
       - synthesise_ips:pt
       - synthesise_project:pt
       - implement_project:pt

#################### CSF+pT Project ###########################

create_project:csf_plus_pt:
    extends: .create_project
    variables:
      extends: .vars
      PROJECT_NAME: csf_plus_pt

synthesise_ips:csf_plus_pt:
    extends: .synthesise_ips
    variables:
      extends: .vars
      PROJECT_NAME: csf_plus_pt
      IP_PATH: IP
    dependencies:
        - create_project:csf_plus_pt

synthesise_project:csf_plus_pt:
    extends: .synthesise_project
    variables:
      extends: .vars
      PROJECT_NAME: csf_plus_pt
    dependencies:
        - synthesise_ips:csf_plus_pt
        - create_project:csf_plus_pt

implement_project:csf_plus_pt:
    extends: .implement_project
    variables:
      extends: .vars
      PROJECT_NAME: csf_plus_pt
    dependencies:
       - create_project:csf_plus_pt
       - synthesise_ips:csf_plus_pt
       - synthesise_project:csf_plus_pt

write_bitstream:csf_plus_pt:
    extends: .write_bitstream
    variables:
      extends: .vars
      PROJECT_NAME: csf_plus_pt
    dependencies:
       - create_project:csf_plus_pt
       - synthesise_ips:csf_plus_pt
       - synthesise_project:csf_plus_pt
       - implement_project:csf_plus_pt

