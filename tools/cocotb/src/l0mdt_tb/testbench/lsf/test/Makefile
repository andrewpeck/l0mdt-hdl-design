
##################################################
# autogenerated file
# created by tb create on: 01-Dec-2020 (06:28:54)
# created by tb create for test: lsf
##################################################

##############################################################################
#
# THE USER MUST NOT EDIT THESE LINES
#
##############################################################################

$(info *** SIM_BUILD=$(SIM_BUILD))
$(info *** TESTBENCH_TOPLEVEL=$(TESTBENCH_TOPLEVEL))
$(info *** TESTBENCH_TEST_MODULE=$(TESTBENCH_TEST_MODULE))
$(info *** COMPONENTS_LIB_DIR=$(COMPONENTS_LIB_DIR))


# CocoTB configuration
TOPLEVEL=$(TESTBENCH_TOPLEVEL)
MODULE=$(TESTBENCH_TEST_MODULE)

##############################################################################
#
# BELOW HERE THE USER CAN EDIT THE LINES
#
##############################################################################

SIM ?= questa

# Location of HDL source files
SRCDIR = $(PWD)/../../../../../../../
SBDIR = $(SRCDIR)/shared/SpyBuffer/src
IPDIR = $(SRCDIR)/IP
USERLOGIC = $(SRCDIR)/UserLogic
HLS       = $(SRCDIR)/l0mdt-hls

# SRCDIR = $(PWD)/../../../../../../
# SBDIR = $(SRCDIR)/IP_repository/SpyBuffer
# IPDIR = $(SRCDIR)/IP

# Specify TopLevel language for cocotb
TOPLEVEL_LANG=verilog
DFDIR     = $(SRCDIR)/dataformats
MTCDIR    = $(USERLOGIC)/mtc/src
LSFDIR    = $(USERLOGIC)/lsf/src
CSFDIR    = $(USERLOGIC)/csf/src
MPTDIR    = $(USERLOGIC)/ptc_mpi/src
HPSDIR    = $(USERLOGIC)/hps/src
HPDIR     = $(USERLOGIC)/hp/src
HEGDIR    = $(USERLOGIC)/heg/src
MPLDIR    = $(USERLOGIC)/mpl/src
SLDIR     = $(USERLOGIC)/sl/src
TARDIR    = $(USERLOGIC)/tar/src
TDCDIR    = $(USERLOGIC)/tdc/src
UCMDIR    = $(USERLOGIC)/ucm/src
UCMHPSDIR = $(USERLOGIC)/ucm_hps/src
ULTDIR    = $(USERLOGIC)/ult/src
UPTDIR    = $(USERLOGIC)/upt/src
SHAREDDIR = $(SRCDIR)/shared
HAL       = $(SRCDIR)/HAL
IP_REPO   = $(HLS)/IPs/vu13p

LSFSIMDIR = $(USERLOGIC)/lsf/sim


LOAD_LUTS_HLS_IP  = $(IP_REPO)/hls_load_luts/hdl/verilog
GET_TRIG_VALS_HLS_IP = $(IP_REPO)/hls_get_trig_vals/hdl/verilog
GET_THETA_OFFSET_HLS_IP = $(IP_REPO)/hls_get_theta_offset/hdl/verilog
GET_TRIG_ADDR_OFFSET_HLS_IP = $(IP_REPO)/hls_get_trig_addr_offsets/hdl/verilog
COMPUTE_LE_RESULTS_HLS_IP = $(IP_REPO)/hls_ComputeLegendreResults/hdl/verilog
HISTOGRAM_BIN_ACCUMULATION_HLS_IP = $(IP_REPO)/hls_histogram_bin_accumulation/hdl/verilog
UPDATE_MAX_RBIN_HLS_IP = $(IP_REPO)/hls_update_max_rbin/hdl/verilog
UPDATE_HISTOGRAM_HLS_IP = $(IP_REPO)/hls_update_histogram/hdl/verilog
SPYBUFFER_SRC = $(SHAREDDIR)/SpyBuffer
# PLL_IP = $(LSFDIR)/xilinx_ip/v2019.1/pll_inst
FIND_MAX_BIN_HLS_IP = $(IP_REPO)/hls_find_max_bin/hdl/verilog
GET_LEGENDRE_SEGMENT_HLS_IP = $(IP_REPO)/hls_get_legendre_segment_endcap/hdl/verilog
GET_LEGENDRE_SEGMENT_BARREL_HLS_IP = $(IP_REPO)/hls_get_legendre_segment_barrel/hdl/verilog
CALC_LE_R_OFFSET_HLS_IP = $(IP_REPO)/hls_calc_LE_r_offset/hdl/verilog
CALC_LE_R_OFFSET_BARREL_HLS_IP = $(IP_REPO)/hls_calc_LE_r_offset_barrel/hdl/verilog
LOAD_LE_REFPOS = $(IP_REPO)/hls_load_LE_refPos/hdl/verilog
HISTMEM_128x4 = $(LSFDIR)/../sim
SRC = $(LSFDIR)
TB = $(LSFDIR)/../tb

# Verilog source files
VERILOG_SOURCES = \
    $(DFDIR)/l0mdt_buses_constants.svh \
    $(PWD)/$(TESTBENCH_TOPLEVEL).v \
    $(SBDIR)/SpyBuffer.v \
    $(SBDIR)/SpyController.v \
    $(SBDIR)/SpyMemory.v \
    $(SBDIR)/SpyPlayback.v \
    $(SBDIR)/aFifo/aFifo.v \
    $(SBDIR)/aFifo/fifomem.v \
    $(SBDIR)/aFifo/rptr_empty.v \
    $(SBDIR)/aFifo/sync_r2w.v \
    $(SBDIR)/aFifo/sync_w2r.v \
    $(SBDIR)/aFifo/wptr_full.v \
    $(SBDIR)/asym_ram_tdp_read_first.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_0.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_1.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_2.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_3.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_4.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_5.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_6.v \
    $(GET_TRIG_VALS_HLS_IP)/get_trig_vals_lut_tables_7.v \
    $(LSFSIMDIR)/dist_mem_gen_v8_0.v \
    $(LSFSIMDIR)/histogram_memory_128x4.v \
    $(SRC)/compute_r_bins.sv \
    $(SRC)/get_rom_addr.sv \
    $(SRC)/update_histogram_dmem.sv \
    $(SRC)/update_histogram_reg_2clk.sv \
    $(FIND_MAX_BIN_HLS_IP)/find_max_bin.v \
    $(GET_LEGENDRE_SEGMENT_BARREL_HLS_IP)/get_legendre_segment_barrel_mul_mul_18s_15ns_33_4_1.v \
    $(GET_LEGENDRE_SEGMENT_BARREL_HLS_IP)/get_legendre_segment_barrel_mul_mul_26ns_18ns_32_4_1.v \
    $(GET_LEGENDRE_SEGMENT_BARREL_HLS_IP)/get_legendre_segment_barrel_lut_divider_barrel_V.v \
    $(GET_LEGENDRE_SEGMENT_BARREL_HLS_IP)/get_legendre_segment_barrel_mul_mul_18s_18s_35_4_1.v \
    $(GET_LEGENDRE_SEGMENT_BARREL_HLS_IP)/get_legendre_segment_barrel.v \
    $(CALC_LE_R_OFFSET_BARREL_HLS_IP)/calc_LE_r_offset_barrel_mac_muladd_18s_15s_33s_34_4_1.v \
    $(CALC_LE_R_OFFSET_BARREL_HLS_IP)/calc_LE_r_offset_barrel_mul_mul_18s_15s_33_4_1.v \
    $(CALC_LE_R_OFFSET_BARREL_HLS_IP)/calc_LE_r_offset_barrel.v \
    $(LOAD_LE_REFPOS)/load_LE_refPos_lut_mdt_ref_pos_V.v \
    $(LOAD_LE_REFPOS)/load_LE_refPos.v \
    $(LSFDIR)/legendreEngine.sv \
    $(LSFDIR)/legendreEngine_2clk.sv \
    $(LSFDIR)/lsf_spybuffer_wrapper.sv


# VHDL source files
VHDL_SOURCES = \
	$(USERLOGIC)/lsf/top_lsf.vhd

VHDL_SOURCES_lsf_lib = \
	$(USERLOGIC)/lsf/top_lsf.vhd

VHDL_SOURCES_project_lib = \
    $(PWD)/prj_cfg.vhd \

include ../../../creator/Makefile_vhdl_lib

# VHDL_SOURCES_shared_lib = \
# 	$(SHAREDDIR)/functions/vhdl2008/vhdl2008_functions_pkg.vhd \
# 	$(SHAREDDIR)/types/common_ieee_pkg.vhd \
# 	$(DFDIR)/l0mdt_constants_pkg.vhd \
# 	$(DFDIR)/l0mdt_dataformats_pkg.vhd \
# 	$(SHAREDDIR)/types/common_constants_pkg.vhd \
# 	$(SHAREDDIR)/types/common_types_pkg.vhd \
# 	$(SHAREDDIR)/config/config_defaults_pkg.vhd


$(info *** VHDL_SOURCES=$(VHDL_SOURCES)###  $(VHDL_SOURCES))

# # Set the include path and compilation flags for CocoTB
EXTRA_ARGS += +incdir+$(SRCDIR)/IP_repository +incdir+$(DFDIR) -L $(COMPONENTS_LIB_DIR)/unisims_ver  -L $(SIM_BUILD)/shared_lib -L $(SIM_BUILD)/lsf_lib -L $(SIM_BUILD)/project_lib -L $(SIM_BUILD)/work +define+RUN_SIM
VSIM_ARGS  += -debugDB -voptargs=+acc -wlf $(SIM_BUILD)/$(TESTBENCH_TEST_MODULE).wlf
VCOM_ARGS  += -2008


##############################################################################
#
# THE USER MUST NOT EDIT THESE LINES
#
##############################################################################
include $(shell cocotb-config --makefiles)/Makefile.inc
include $(shell cocotb-config --makefiles)/Makefile.sim
